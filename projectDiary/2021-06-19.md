최근에 이 프로젝트에 신경을 못 쓰는 바람에 오랜만에 다시 문제에 접근해본다.

이전에 발생하였던 필터가 여러번 도는 문제중 하나로, script 나 css 나 img 도 각 하나의 요청으로 인식되어 이러한 요청들마다 모두 필터가 도는 문제였다.

그래서 webIgnoring에 이러한 경로들을 담아 이 문제는 해결하였다.

그러나 필터가 두번씩 도는 문제는 해결을 못하였다.

구글링을 해보아도 이러한 현상이 자주 발생하는 것을 확인할 수 있었다.(filter being called twice)

아직 해결 방법을 못알아냈다.


그냥 기존의 session 기반 로그인으로 회귀할지, 이 문제를 해결하고 jwt를 localStroage 에 저장해서 반환하는 방법으로 해결할지 고민이다.

사실, jwt를 반환하고 localStroage에 저장하는 것 까진 다 했지만 필터 문제를 해결하지 못한게 크다.

이 문제를 해결하고 추후에 보안쪽에 더 관심이 생기면 jwt를 memory나 아니면 요청마다 새로운 jwt를 반환해주는 여러 방법도 고려해보고 싶다.

우선은 현재 문제부터 해결하고....
---
잘못 알았던 것 같다.
post 요청의 경우 jwt token 을 확인했어야 했는데 그 이전에 들어가는 주소까지 모두 jwt 토큰 요청을 하게 했더니 생기는 에러였다.
그래서 글을 쓰는 포스팅 페이지는 권한을 두어서 접근을 막고, 글을 등록하는 post 메서드 행위가 일어 날 때 jwt token을 확인하면 되는 것인가?
고민 해보다가 이런식으로 해결을 하긴 했다.

별개로 필터가 2번 3번씩 돌던.....문제는 어찌됐든 해결되었는데. 뭔가 찜찜하다.
이 문제는 어찌됐든 여기에 묻어두고 다음 챕터로 나아가야할 것 같다. 너무 많은 시간을 소비했다. 