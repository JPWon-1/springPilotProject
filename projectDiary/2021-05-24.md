# 세션이란?
1) web에서 server에 최초 요청을 하면
2) 서버는 html을 반환하면서 함께 header안에 쿠키안에 세션id를 담아서 반환한다.
3) 두번째 요청부터는 웹브라우저에 세션을 저장하고 있다가 세션을 비교해서 없으면 새로 발급, 있으면 저장되어있는걸 반환

## 세션은 언제 사라지나?
1) 서버쪽에서 세션값을 없앨 때.
2) 사용자가 브라우저를 다 종료시킨다.
3) 특정 시간이 지나면 자동으로 사라진다.

## 세션의 단점은?
서버의 가용인원보다 많은 요청이 들어오면 서버를 증설해야한다.
그래서 클라이언트 단에서 부하가 덜 걸리는 서버에 요청을 할 수 있게 된다 ( 이를 로드 밸런싱이라 한다 )

이 과정에서 예를들어 로드밸런싱중에 서버1에 요청을하고 응답을 받고
다시 서버1에 요청을 또 하게 되면 세션이 있어서 인증된 사용자임을 계속 알 수 있게 된다.

하지만 서버가 부하가 걸려서 서버2에 요청을 하게되면 서버2는 사용자를 처음 온거로 인식하게 되고
서버2에는 세션값이 없기에 유저의 세션을 잃어버린다.

### 이를 방지하기 위해 
1) 스티키 서버를 만들어 로드밸런싱을 무시하여 첫 접근한 서버에 계속 요청을 할 수 있게 하는 방법이 있고
2) 세션을 복제하는 방법
3) 세션에다가 정보를 저장하는것이 아니라 서버들이 하나의 메모리서버에 세션값을 넣어놓고 공유해서 쓰는 것이 있다.
(메모리 서버가 아닌 하드디스크면 엄청나게 느려진다. 하드디스크면 I/O가 일어나 램(전기적 신호) 보다 100만배정도 느려진다.
메모리서버의 예로는 redis가 있다.)

# TCP
웹에는 OSI 7계층이 있다.

7 응용계층 : 응용프로그램

6 프리젠테이션 : 암호화, 압축

5 세션 : 인증 체크

4 트랜스포트 : TCP통신을 할지 UDP통신을 할지 판단을 함 
- TCP는 신뢰성을 판단함 ex) 웹과 같이 정확성이 필요 한 것
- UDP는 신뢰성을 판단 안함. ex) 사람이 이해할 수 있는 범위 내의 통신

3 네트워크 : IP를 결정

2 데이터 링크 : IP로 찾아 간 공유기에서 무엇에 연결해야할지 찾아줌

1 물리 : 실제 전기선 ( ex) 광케이블 ) 

7>6>5>4>3>2>1 >2>3>4>5>6>7 의 과정을 통해 응용프로그램->응용프로그램 으로 데이터를 전달한다.

## 여기서 웹은 TCP 통신을 한다!

---
# 보안
보안의 3요소
1) 기밀성C : 보안이 노출되면 안됨 
2) 무결성I : 데이터가 변경 되면 안됨
3) 가용성A : 올바른 접근을 할 수 있어야 함
- 문서를 암호화하면 가용성은 깨지더라도 기밀성은 유지됨
- 문서를 다른 자료와 못바꾸게 하면 무결성이 유지됨

**but, 기밀성과 무결성이 지켜진다고 하더라도 A -> B 로 데이터가 전송되는 과정에서
B가 데이터를 못열어본다면 가용성이 깨지게 됨. 따라서 A -> B 에 열쇠를 같이 전달해야 함.
**but, 열쇠가 전달된다고 하더라도 문서가 누구한테서 오가는지 알아야 중간에 문서가 낚아채져 있는지 모름

## 따라서 위의 두가지 문제를 해결해야 보안 이슈를 해결 할 수 있다.

RSA 암호화 - public key(공개키), private key(개인키) 두 가지를 가지고 있다.
a->b에게 데이터를 보내는데 b가 볼 수 있도록 b 개인키로만 열 수 있게 데이터를 암호화한다
이 방식으로 키 문제를 해결 할 수 있다.

공개키로 잠구면 개인키로 열어볼 수 있고, 개인키로 잠구면 공개키로 열 수 있다.
개인키로 잠구는것 -> 개인서명
공개키로 잠구는 것 -> 암호화를 의미한다.

개인키로 잠구는것으로 인증문제를 해결할 수 있다.

A -> B로 보내는 데이터를 
B공개키로 잠구고 그걸 다시 한번 A개인키로 잠군다

이러면 B는 
1) 문서를 받고
2) A의 공개키로 열어본 후에 , 열리면 인증이 된 거로 판단하고, 안열리면 인증이 안된거로 판단한다
3) 열리면 B의 개인키로 다시 문서를 연다.

이를 통해 인증이 가능하고, 암호화를 해결할 수 있다

TODO. JWT 공부, JWT구축
