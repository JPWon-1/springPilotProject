Spring Security를 이용한 페이지 보안을 구현 중.

implementation 'org.springframework.boot:spring-boot-starter-security'
testImplementation 'org.springframework.security:spring-security-test'

를 빌드 그레이들에 추가해주었다.

추가 해준 후 프로젝트 실행 후 로컬로 들어가보니 시작화면부터 아이디와 비밀번호를 치라는 화면이 떳다.
이건 아마 스프링 시큐리티가 기본적으로 제공해주는 UI같다.

아직 구현단계이고 , 적어도 대문화면이랑 메인페이지는 들어갈 수 있게 해놔야했기에
몇가지 설정을 해주었다.

1.config 추가

config 폴더 하위에 WebSecurityConfig.java 를 추가해주어
```jsx
@Configuration
@EnableWebSecurity
public class WebSecurityConfig extends WebSecurityConfigurerAdapter{
    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .csrf().disable()
            .headers().frameOptions().disable().and()
        .authorizeRequests()
            .antMatchers("/","/css/**","/images/**","/js/**","/h2-console/**").permitAll()
            .antMatchers("/api/v1/**").hasRole(Role.USER.name())    
            .anyRequest().authenticated().and()
        .formLogin()
            .loginPage("/login")
            .permitAll().and()
        .logout()
            .logoutSuccessUrl("/");
    }
}
```
를 추가해주었다.
@EnableWebSecurity는 SpringSecurity 설정들을 활성화 시켜 준다.

@csrf().disable().headers().frameOptions().disable() 은 h2-console화면을 사용하기 위해 
해당 옵션들을 disable 해준 것이다.

그 밑으로 authorizeRequest에 추가해준것들은
URL별 권한 관리를 서정하는 옵션의 시작점이다.
authorizeRequest가 선언되어야만 antMatchers 옵션을 사용할 수 있다.

antMatchers - 권환 관리 대상을 지정하는 옵션이다.
URL, HTTP 메소드별로 관리가 가능하다.
"/" 등 지정된 URL들을 permitAll()을 해주어 전체 열람 권한을 주었다.
/api/v1/** 주소를 가진 API는 USER만 할 수 있도록 해놓았다.

anyRequest에는 authenticated()를 추가하여 나머지 URL들은 모두 인증된 사용자들에게만 허용되도록 했다.
즉 로그인한 사용자들을 이야기 한다.

formLogin
login시 login 페이지로 이동하게 된다. login 페이지는 누구나 볼 수 있어야 한다.
login페이지에 로그인 된 유저나 관리자만 볼 수 있게끔 설정을 해주면
가입이 필요하여 로그인 페이지로 이동되었는데 또 다시 인증을 하라는 도돌이표가 생성되기에 해주었다.

logout
logoutSuccesUrl("/")을 통해 로그아웃 성공 시 "/" 주소로 이동하게 해주었다.



--> TODO: 유저 회원가입, 로그인을 구현을 못했다. 인증 부분은 너무 어려운것........시간을 많이 투자해야할 부분같다



