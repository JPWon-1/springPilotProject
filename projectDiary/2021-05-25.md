# RFC?
RFC(Reqesut For Comments - 커멘트좀 달아주세요)는 1969년 Arpanet 프로젝트 일부로 시작하였고 이것을 공부하던 미국의 대학생들이 자신들이 토론한 것이나 이야기 한 것들을 문서에 기록해야겠다는 것에서 시작하였다. 이를 시작으로 일련번호를 가지고 발간되게 된다. 

# JWT?실리게 된다. 
JWT는 RFC 7519에서 자세히 볼 수 있다.
https://datatracker.ietf.org/doc/html/rfc7519
요약하자면 두 당사자간에 정보를 JSON객체로 안전하게 전송하기 위한 개방형 표준(RFC 7519)이다.
이 정보는 디지털 서명이 되어 있으므로 신뢰할 수 있다.

## 언제 사용?
### Authorization

### 정보 교환

## JWT 구성
- header( 헤더 - 알고리즘, 타입)
- payload( 정보 - 클레임)
- signature( 서명 - 헤더, 페이로드 , 시크릿 키 ) => HMAC으로 암호화한다.

로 이루어져있다.
# Header
헤더는 type과 알고리즘 두가지의 정보를 지니고 있다. type은 토큰의 타입을 지정한다.(JWT) 알고리즘은 해싱 알고리즘을 지정한다. 보통 HMAC SHA256 또는 RSA가 사용된다.
이 알고리즘은 토큰을 검증할 때 사용되는 signature 부분에서 사용된다.

# Payload
페이로드에는 토큰에 담을 정보가 들어가 있다.
여기에 담는 정보의 한 조각을 클레임이라고 부르고 name:value 의 한 쌍으로 이루어져 있다.
클레임의 종류에는 
registered , public , private 클레임이 있다.
## registered
토큰 발급자, 제목, 대상자 등 토큰에 대한 정보들을 담기 위한 클레임이며 필수값은 아니다.
## public
공개 클레임은 공개되는 클레임이며 URI형식으로 이름을 짓는다(충돌을 방지하기 위해)
```
https://abc.com/jwt_claims/is_admin":true
```
## private
클라이언트 <-> 서버간 협의하에 사용되는 비공개 클레임이다. 
# Signature
서명은 헤더의 인코딩값과 정보의 인코딩값을 합친 후 주어진 비밀키로 해쉬하여 생성한다.


# RSA?
- 비대칭키 방식이다.
- message에 SHA256 적용 후 private key 사용해서 암호화
- JWT를 발급한 서버뿐만 아니라, JWT를 받아서 사용하는 어떤 주체라도 signature 유효성 검증이 가능하다.
- RSA 암호는 공개키 암호시스템으로 암호화 뿐만 아니라 전자 서명이 가능한 최초의 알고리즘이다.
- 큰 숫자를 소인수 분해하는 것이 어렵다는 것에 기반을 두고 있다.

# HS256
- 대칭키 방식이다.
- message에 SHA256 적용 후 대칭키를 사용해서 암호화한다.
- JWT를 발급한 서버 또는 해당 대칭키를 미리 공유해서 알고있는 주체들만 signature 유효성 검증이 가능하다.


# 어떻게 사용할 것인가?
1) 유저가 로그인 했을 때 입력값이 DB의 회원정보와 일치 할 때 JWT를 발급
2) JWT를 로컬/세션스토리지에 저장
3) 유저가 회원인증이 필요한 서비스에 접근했을 때, header, authorization에 토큰값을 담아 보낸다.
4) 토큰값을 복호화하여 유저의 정보를 확인한다
5) DB에 해당정보가 있는지 확인한 후 해당 서비스를 사용 가능하게 할지 정한다.



